data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "40-44" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "40-44" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "40-44" & data_f$date == 2019)])
children[41, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "40-44" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "40-44" & data_f$date == 2019)])
children[40, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "40-44" & data_f$date == 2019)])
children[39, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2019)])
children[38, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2019)])
children[37, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2019)])
children[36, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2019)])
children[35, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "35-39" & data_f$date == 2019)])
children[34, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2019)])
children[33, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2019)])
children[32, 18:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2002)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2019)])
children[31, 17:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2003)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2019)])
children[30, 16:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2004)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "30-34" & data_f$date == 2019)])
children[29, 15:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2005)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2019)])
children[28, 14:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2006)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2019)])
children[27, 13:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2007)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2019)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2019)])
children[26, 12:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2008)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2019)])
children[25, 11:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2009)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "25-29" & data_f$date == 2019)])
children[24, 10:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2010)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2019)])
children[23, 9:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2011)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2019)])
children[22, 8:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2012)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2019)])
children[21, 7:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2013)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2019)])
children[20, 6:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2014)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "20-24" & data_f$date == 2019)])
children[19, 5:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2015)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2019)])
children[18, 4:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2016)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2017)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2019)])
children[17, 3:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2017)] ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2018)],
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2019)])
children[16,2:1] <- c(data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2018)]  ,
data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2019)])
children[15,1] <- data_f$fertility_rate[which(data_f$age == "15-19" & data_f$date == 2019)]
plot(apply(children, 1, sum), xlab = "Age of father", ylab = "Number of children")
children = as.data.frame(children)
names(children) = paste0(seq(0:17)-1, ' years')
write_csv(path = paste0('DATA/children/child_raw_', country, '_m.csv'), children)
plot_c = as.data.frame(as.numeric(as.character(unlist(children))))
plot_c$father_age = rep(1:100,18)
plot_c$child_age =sort(rep(seq(18)-1, 100))
setnames(plot_c, 1, 'prob')
#ggplot(as.data.frame(plot_c), aes(x=child_age, y=father_age, fill=prob)) +
#  geom_tile(color = "white")+
#  theme(axis.text.x = element_text(angle = 90)) +
#  labs(x= "child age", y="father age") +
#  scale_fill_gradient2(low = "yellow", high = "red")
}
process_number_children_usa()
process_number_children_usa <- function(high_fertility = TRUE){
cat(sprintf("Processing Fertility rates\n"))
if (high_fertility == TRUE){
process_usa_fertility()
}else {
process_usa_fertility_2()
}
# child mortality
cat(sprintf("Processing child mortality rates\n"))
process_child_mortality('usa', 'United States of America')
# fathers
cat(sprintf("Processing number of children of fathers\n"))
data_f = read.csv(paste0('DATA/fertility/usa_fertility_m_all.csv'))
data_f$fertility_rate <- data_f$fertility_rate/1000
data_f$date = data_f$year
data_f$age = as.character(data_f$age)
process_children_father_55_plus("usa", data_f)
is_child_mortality_needed = 1
add_child_mortality(is_child_mortality_needed, "usa")
# mothers
cat(sprintf("Processing number of children of mothers\n"))
data = read.csv(paste0('DATA/fertility/usa_fertility_f.csv'))
data_f = copy(data)
data_f$fertility_rate = data_f$fertility_rate/1000
# d_2019 = data_f[which(data_f$date == '2019'),]
# d_2020 = copy(d_2019)
# d_2020$date = '2020'
# data_f = rbind(data_f, d_2020)
process_children_all("usa", is_child_mortality_needed, data_f)
process_fertility_plots("usa")
}
process_number_children_usa()
data_f = read.csv(paste0('DATA/fertility/usa_fertility_m_all.csv'))
data_f$fertility_rate <- data_f$fertility_rate/1000
data_f$date = data_f$year
data_f$age = as.character(data_f$age)
children = matrix(rep(0, 100*18), nrow = 100)
names(children) = paste0(seq(0:17), 'years')
children[100, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
View(children)
children[99, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[98, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[97, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[96, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[95, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[94, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[93, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[92, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[91, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[90, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002,2019))])
children[89, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[88, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[87, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[86, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[85, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[84, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[83, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[82, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[81, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[80, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[79, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[78, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[77, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[76, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[75, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[74, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[73, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[72, 18:1] <-  c( data_f$fertility_rate[which(data_f$age == "55+" & data_f$date%in% seq(2002.2019))])
children[71, 18:1] <- c( data_f$fertility_rate[which(data_f$age == "50-54" & data_f$date == 2002)],
data_f$fertility_rate[which(data_f$age == "55-59" & data_f$date%in% seq(2003, 2007))] ,
data_f$fertility_rate[which(data_f$age == "60-64" & data_f$date %in% seq(2008,2012))],
data_f$fertility_rate[which(data_f$age == "65+" & data_f$date %in% seq(2013, 2017))],
data_f$fertility_rate[which(data_f$age == "65+" & data_f$date%in% seq(2018,2019))])
children[70, 18:1] <- c( data_f$fertility_rate[which(data_f$age == "50-54" & data_f$date%in% seq(2002,2003))] ,
data_f$fertility_rate[which(data_f$age == "55-59" & data_f$date%in% seq(2004, 2008))] ,
data_f$fertility_rate[which(data_f$age == "60-64" & data_f$date %in% seq(2009,2013))],
data_f$fertility_rate[which(data_f$age == "65+" & data_f$date %in% seq(2014, 2018))],
data_f$fertility_rate[which(data_f$age == "65+" & data_f$date == 2019)])
children[69, 18:1] <- c( data_f$fertility_rate[which(data_f$age == "50-54" & data_f$date%in% seq(2002,2004))] ,
data_f$fertility_rate[which(data_f$age == "55-59" & data_f$date%in% seq(2005, 2009))] ,
data_f$fertility_rate[which(data_f$age == "60-64" & data_f$date %in% seq(2010,2014))],
data_f$fertility_rate[which(data_f$age == "65+" & data_f$date %in% seq(2015, 2019))])
children[68, 18:1] <- c( data_f$fertility_rate[which(data_f$age == "50-54" & data_f$date%in% seq(2002,2005))] ,
data_f$fertility_rate[which(data_f$age == "55-59" & data_f$date%in% seq(2006, 2010))] ,
data_f$fertility_rate[which(data_f$age == "60-64" & data_f$date %in% seq(2011,2015))],
data_f$fertility_rate[which(data_f$age == "65+" & data_f$date %in% seq(2016, 2019))])
View(data_f)
process_number_children_usa()
source(file.path("script","process_children_function_xy.R"))
source(file.path("script","process_fertility_xy.R"))
source(file.path("script","process_child_mortality_xy.R"))
process_number_children_usa()
country = 'usa'
d_deaths = read.csv('DATA/USA/usa_all.csv', stringsAsFactors = FALSE)
d_merge = d_deaths
d_children = read.csv(paste0('DATA/children/', country,'_children.csv'), stringsAsFactors = FALSE)
View(d_children)
d_children$age = paste0(d_children$age%/%5 * 5,'-',d_children$age %/% 5 *5+4)
#d_children$age = paste0((d_children$age-5)%/%10 * 10 +5,'-',(d_children$age-5) %/% 10 *10+9 +5)
d_children$age = ifelse(d_children$age %in% c('-5-4', '5-14'), '0-14',
ifelse(d_children$age %in% c('85-94', '95-104'), '85+', d_children$age))
d_children = d_children %>% group_by(age, gender) %>% mutate(nb_c = mean(children)) %>%
select(-children) %>% ungroup()%>%distinct()
d_merge$gender = as.character(d_merge$gender)
d_children$gender = ifelse(d_children$gender == 'female', 'Female', 'Male')
d_m1 = merge(d_merge, d_children, by = c('age', 'gender'))
d_m1 = as.data.table(d_m1)
d_m1[, orphans := round(deaths * nb_c)]
d_m1 = d_m1%>% arrange(age)
write_csv(path = paste0('DATA/children/', country,'_orphans_all.csv'), d_m1)
p <- ggplot(d_m1, aes(x = age, y = orphans, fill = gender)) +
geom_bar(stat="identity", position=position_dodge()) +
theme_bw()+
theme(axis.text.x = element_text(angle = 30, hjust = 1, vjust = 1))+
xlab( 'Age of Parent') +
ylab('Number of Orphans')+
guides(fill=guide_legend(title="Sex of Parent"))
p
View(d_m1)
d_m1[, orphans := round(deaths * nb_c)]
d_m1[, orphans := round(death * nb_c)]
d_m1 = d_m1%>% arrange(age)
write_csv(path = paste0('DATA/children/', country,'_orphans_all.csv'), d_m1)
p <- ggplot(d_m1, aes(x = age, y = orphans, fill = gender)) +
geom_bar(stat="identity", position=position_dodge()) +
theme_bw()+
theme(axis.text.x = element_text(angle = 30, hjust = 1, vjust = 1))+
xlab( 'Age of Parent') +
ylab('Number of Orphans')+
guides(fill=guide_legend(title="Sex of Parent"))
p
ggsave(filename = "figures/orphans_all_age_usa.pdf", p, width = 6, height = 5)
d_summary = d_m1 %>% select(age, gender, death, orphans)
d_summary$age = as.character(d_summary$age)
View(d_summary)
d_summary$age = ifelse(d_summary$age %in% c('70-74','75-79', '80-84','85+'), '70+',
ifelse(d_summary$age %in% c('50-54','55-59','60-64','65-69'), '50-69',
ifelse(d_summary$age %in% c('20-24','25-29', '30-34','35-39', '40-44','45-49'), '20-49','0-19')))
# d_summary$age = ifelse(d_summary$age %in% c('65-74', '75-84', '85+'), '65+',
#                        ifelse(d_summary$age %in% c('45-54','55-64'), '45-64',
#                               ifelse(d_summary$age %in% c('0-14'), '0-14', '15-44')))
d_summary = d_summary %>% group_by(age, gender) %>%
mutate(max_deaths = as.integer(round((sum(death)))),
nb_orphans = as.integer(round(sum(orphans)))) %>% ungroup() %>%
select(-orphans, -death) %>%
distinct()
write_csv(path = 'DATA/USA/all_data.csv', d_summary)
as.data.frame(d_summary %>% filter(age != '0-19') %>%
group_by(gender) %>%
mutate(total_deaths= round(sum(max_deaths)),
orphans= round( sum( nb_orphans))) %>%
ungroup())
